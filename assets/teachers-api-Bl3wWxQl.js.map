{"version":3,"file":"teachers-api-Bl3wWxQl.js","sources":["../../src/js/favorites/favorites-storage.js","../../src/js/teachers/teacher-extra.js","../../src/js/teachers/teacher-card.js","../../src/js/iziToast/onlyAuth.js","../../src/js/favorites/favorites-toggle.js","../../src/js/teachers/teacher-card-actions.js","../../src/js/teachers/teachers-api.js"],"sourcesContent":["// отримати зі сховища - якщо є юзер\nexport function getFavorites(userId) {\n  return JSON.parse(localStorage.getItem(`favorites_${userId}`)) || [];\n}\n\n// записати у сховище з такою назвою, та якщо є юзер\nexport function saveFavorites(userId, favorites) {\n  localStorage.setItem(`favorites_${userId}`, JSON.stringify(favorites));\n}\n\nexport function toggleFavorites(userId, teacherId) {\n  const favorites = getFavorites(userId);\n  const favoriteIndex = favorites.indexOf(teacherId);\n\n  if (favoriteIndex === -1) {\n    favorites.push(teacherId);\n  } else {\n    favorites.splice(favoriteIndex, 1);\n  }\n\n  saveFavorites(userId, favorites);\n\n  return favorites;\n}\n\nexport function isFavorites(userId, teacherId) {\n  const favorites = getFavorites(userId);\n\n  return favorites.includes(teacherId);\n}\n","//\n\nexport function createTeacherExtra(teacher) {\n  return `\n    <div class=\"teacher-extra is-hidden\">\n\n    <p class=\"extra-experience\"> ${teacher.experience}</p>\n\n    <h3 class=\"is-hidden\">Reviews</h3>\n    <ul class=\"teacher-reviews\">\n      ${teacher.reviews\n        .map(\n          review => `\n          <li class=\"review-item\">\n            <p class=\"review-title\"><span class=\"review-name\">${\n              review.reviewer_name\n            }</span>\n            <span> <svg width=\"16\" height=\"16\" class=\"svg-star\">\n            <use href=\"#icon-star\"></use>\n          </svg></span>\n              <span>${review.reviewer_rating.toFixed(1)}</span>\n\n            </p>\n            <p class=\"review-comment\">${review.comment}</p>\n          </li>\n        `\n        )\n        .join('')}\n    </ul>\n  </div>\n    `;\n}\n","import { getCurrentUser } from '../auth/auth-state';\nimport { isFavorites } from '../favorites/favorites-storage';\nimport { createTeacherExtra } from './teacher-extra';\n\nexport function createTeacherCard(teacher) {\n  const user = getCurrentUser(); // отримую поточного юзера\n  // console.log('user:', user);\n  // console.log('teacher.id:', teacher.id);\n\n  // if (user) {\n  //   console.log('isFavorite:', isFavorites(user.uid, teacher.id));\n  // }\n\n  // якщо юзер існує та id вчителя є у фоворитах - міняю іконку\n  const favoriteIcon = user && isFavorites(user.uid, teacher.id);\n  const iconId = favoriteIcon ? '#icon-hover' : '#icon-normal';\n\n  return `\n<li  class=\"teacher-card\"\n     data-id=\"${teacher.id}\">\n  <!-- Avatar -->\n  <div class=\"teacher-avatar\">\n    <img src='${\n      teacher.avatar_url || '../img/main-content/default-avatar.png'\n    } '\n     alt=\"${teacher.name || 'Teacher'} \" class=\"teacher-avatar-img\" width=\"96\"\n      height=\"96\" />\n    <svg width=\"12\" height=\"12\" class=\"teacher-avatar-svg\">\n      <use href=\"#icon-group\"></use>\n    </svg>\n  </div>\n\n  <!-- Main content -->\n  <div class=\"teacher-content\">\n    <div class=\"teacher-content-top\">\n      <!-- Name -->\n      <div class=\"teacher-data\">\n                <p class=\"teacher-languages\">${teacher.languages}</p>\n\n        <h2 class=\"teacher-name\">\n          ${teacher.name} ${teacher.surname}\n        </h2>\n      </div>\n      <!-- Top info row -->\n      <div class=\"teacher-meta\">\n\n        <p class=\"teacher-lessons-online\">\n                    <svg width=\"16\" height=\"16\" class=\"svg-book\">\n            <use href=\"#icon-book-open\"></use>\n          </svg>\n          Lessons online\n        </p>\n        <span class=\"teacher-separator\">|</span>\n        <p class=\"teacher-lessons-done\">\n          Lessons done: <span>${teacher.lessons_done}</span>\n        </p>\n        <span class=\"teacher-separator\">|</span>\n        <p class=\"teacher-rating\">\n          <svg width=\"16\" height=\"16\" class=\"svg-star\">\n            <use href=\"#icon-star\"></use>\n          </svg>\n          Rating: <span>${teacher.rating}</span>\n        </p>\n        <span class=\"teacher-separator\">|</span>\n        <p class=\"teacher-price\">\n          Price / 1 hour: <span class=\"price-color\">${\n            teacher.price_per_hour\n          }$</span>\n        </p>\n        <button class=\"teacher-like-btn\" type=\"button\" >\n          <svg width=\"16\" height=\"16\" class=\"svg-heart\">\n             <use href=\"${iconId}\"></use>\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    <!-- Skills / description -->\n    <div class=\"teacher-info\">\n\n      <p class=\"teacher-speaks\">\n        <span class=\"teacher-info-label\">Speaks:</span>\n        <span class=\"teacher-info-language\"> ${teacher.languages}</span>\n\n      </p>\n\n      <p class=\"teacher-lesson-info\">\n        <span class=\"teacher-info-label\">Lesson Info:</span>\n${teacher.lesson_info}      </p>\n\n      <p class=\"teacher-conditions\">\n        <span class=\"teacher-info-label\">Conditions:</span>\n${teacher.conditions}      </p>\n\n    </div>\n\n    <!-- Read more -->\n    <button class=\"teacher-read-more\" type=\"button\">\n      Read more\n    </button>\n    <!-- ---------------------   teacher-extra   ------------------------------ -->\n${createTeacherExtra(teacher)}\n    <!-- ---------------------------------------------------------------------- -->\n\n    <!-- Levels -->\n    <ul class=\"teacher-levels\">\n${teacher.levels\n  .map(level => `<li class='teacher-level'><p>#${level}</p></li>`)\n  .join('')}\n\n    </ul>\n\n    <button type='button' class=\"trial-lesson-btn is-hidden\" ${teacher}>Book trial lesson</button>\n\n  </div>\n</li>\n    `;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function onlyAuthMessage() {\n  iziToast.show({\n    title: 'Hello!',\n    message: 'This feature is available only to authorized users!',\n\n    zindex: 9999,\n    position: 'topCenter',\n    backgroundColor: '#f4c550',\n    progressBarColor: 'rgb(0, 255, 184)',\n    pauseOnHover: true,\n  });\n}\n","import { getCurrentUser } from '../auth/auth-state';\nimport { onlyAuthMessage } from '../iziToast/onlyAuth';\nimport { modalWindow } from '../modal/modal';\nimport {\n  // getFavorites,\n  isFavorites,\n  toggleFavorites,\n} from './favorites-storage';\n\nexport function initFavoriteToggle(container) {\n  container.addEventListener('click', event => {\n    const likeBtn = event.target.closest('.teacher-like-btn');\n    if (!likeBtn) return;\n\n    const card = likeBtn.closest('.teacher-card');\n    const teacherId = card.dataset.id;\n    const user = getCurrentUser();\n\n    // console.log('CLICK teacherId:', teacherId);\n    // console.log('Current favorites:', getFavorites(user?.uid));\n\n    // гість\n    if (!user) {\n      // тут вивести повідомлення\n      // alert('This feature is available only to authorized users!');\n      onlyAuthMessage();\n      modalWindow({ type: 'login' });\n      return;\n    }\n\n    // юзер є\n    // оновлюю дані у сховищі\n    toggleFavorites(user.uid, teacherId);\n    // <use> всередині  кнопки\n    const useElement = likeBtn.querySelector('use');\n\n    // чи є зараз цей вчитель у фаворитах\n    const isNowFavorite = isFavorites(user.uid, teacherId);\n\n    //  href залежно від результату\n    if (isNowFavorite) {\n      useElement.setAttribute('href', '#icon-hover');\n    } else {\n      useElement.setAttribute('href', '#icon-normal');\n    }\n  });\n}\n","// teachers/teacher-card-actions.js\nimport { modalWindow } from '../modal/modal';\nimport { initFavoriteToggle } from '../favorites/favorites-toggle';\n\nexport function initTeacherCardActions({ container, getTeachers }) {\n  if (!container) return;\n\n  initFavoriteToggle(container);\n\n  // ----------------  teacher  extra - додаткова інформація\n  container.addEventListener('click', event => {\n    handleReadMore(event, container);\n    handleTrialLesson(event, getTeachers());\n  });\n}\n\n// ---------------- обробка - показати більше\nfunction handleReadMore(event, container) {\n  //ловиться клік по всьому списку\n  const readMoreBtn = event.target.closest('.teacher-read-more');\n  // кнопка на картці де був клік\n  if (!readMoreBtn) return;\n  // якщо не кнопка - нічого не робиться!!!\n\n  const card = readMoreBtn.closest('.teacher-card');\n  // картка вчителя де був клік\n  const extra = card.querySelector('.teacher-extra');\n  // прихований текст\n  const trialLessonBtn = card.querySelector('.trial-lesson-btn');\n  // BTN - Book trial lesson\n\n  closeOtherCards(container, card); // закриваю інші картки\n\n  // перемикаю поточну картку\n  const isHidden = extra.classList.toggle('is-hidden');\n  if (isHidden) {\n    // закрити\n    readMoreBtn.classList.remove('is-hidden');\n    trialLessonBtn.classList.add('is-hidden');\n  } else {\n    //  відкрити\n    readMoreBtn.classList.add('is-hidden');\n    trialLessonBtn.classList.remove('is-hidden');\n  }\n}\n\n//------------------обробка кнопки бронювання уроку\nfunction handleTrialLesson(event, teachers) {\n  const trialLessonBtn = event.target.closest('.trial-lesson-btn');\n  if (!trialLessonBtn) return;\n\n  const card = trialLessonBtn.closest('.teacher-card');\n  const teacherId = card.dataset.id;\n\n  const teacher = teachers.find(t => t.id === teacherId);\n  if (!teacher) return;\n\n  modalWindow({ type: 'trial', teacher });\n}\n\n// ---------------------  закрити інші картки\nfunction closeOtherCards(container, currentCard) {\n  container.querySelectorAll('.teacher-card').forEach(card => {\n    if (card === currentCard) return;\n\n    card.querySelector('.teacher-extra')?.classList.add('is-hidden');\n    card.querySelector('.trial-lesson-btn')?.classList.add('is-hidden');\n    card.querySelector('.teacher-read-more')?.classList.remove('is-hidden');\n  });\n}\n","import axios from 'axios';\n\nconst API_TEACHERS =\n  'https://learnlingo-12-25-default-rtdb.firebaseio.com/.json';\n\nexport async function fetchTeachers() {\n  const response = await axios.get(API_TEACHERS);\n\n  if (!response.data) {\n    return [];\n  }\n\n  // return Object.values(response.data);\n  return Object.entries(response.data).map(([id, teacher]) => ({\n    id, //  Firebase key\n    ...teacher, // решта даних\n  }));\n}\n"],"names":["getFavorites","userId","saveFavorites","favorites","toggleFavorites","teacherId","favoriteIndex","isFavorites","createTeacherExtra","teacher","review","createTeacherCard","user","getCurrentUser","iconId","level","onlyAuthMessage","iziToast","initFavoriteToggle","container","event","likeBtn","modalWindow","useElement","initTeacherCardActions","getTeachers","handleReadMore","handleTrialLesson","readMoreBtn","card","extra","trialLessonBtn","closeOtherCards","teachers","t","currentCard","API_TEACHERS","fetchTeachers","response","axios","id"],"mappings":"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"}